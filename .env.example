# Archivo .env.example - Configuración del Proyecto
# Copia este archivo como .env y configura según tu entorno

# ==============================================================================
# CONFIGURACIÓN GENERAL
# ==============================================================================
NODE_ENV=production
ENV_PORT=3000
ENV_CORS=http://localhost:3000
ENV_FILE_MAX_SIZE=120mb
DEBUG_SERVER=true
ENV_SWAGGER_SHOW=true
ENV_APP_NAME=Ariel

# ==============================================================================
# POSTGRESQL - BASE DE DATOS
# ==============================================================================
# Credenciales para PostgreSQL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=soloanime1

# Nombres de las bases de datos
POSTGRES_DB=db_espacios
POSTGRES_DBB=db_reservas

# ==============================================================================
# DATABASE URLS - CONEXIONES
# ==============================================================================

DATABASE_URL=postgresql://postgres:soloanime1@dba:5432/db_espacios?schema=public
DATABASE_URL_B=postgresql://postgres:soloanime1@dbb:5432/db_reservas?schema=public

# ==============================================================================
# JWT - AUTENTICACIÓN
# ==============================================================================
JWT_SECRET="q^WUUG7NAex9Da5!eT@Y4Y"

# ==============================================================================
# KAFKA - EVENT-DRIVEN ARCHITECTURE
# ==============================================================================
# Broker de Kafka - dirección y puerto
# Host: 'kafka' (nombre del servicio en docker-compose)
# Puerto: 29092 (puerto interno entre servicios)
KAFKA_BROKERS=kafka:29092

# ID del cliente Kafka (se sobrescribe en docker-compose para cada servicio)
# espacios-comunitarios: espacios-producer
# reserva-comunitarios: reservaciones-consumer
KAFKA_CLIENT_ID=espacios-producer

# ==============================================================================
# KEYCLOAK - OAUTH2 / OIDC IDENTITY PROVIDER
# ==============================================================================
# Credenciales de administrador de Keycloak
# Usuario y contraseña para acceder a la consola de administración
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=admin123

# Configuración de la base de datos de Keycloak
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=keycloak123
KEYCLOAK_DB_NAME=keycloak_db

# URL del servidor Keycloak
# Dentro de Docker: http://keycloak:8080
# Desde la máquina host: http://localhost:8180
KEYCLOAK_URL=http://keycloak:8080

# Nombre del reino (realm) en Keycloak
KEYCLOAK_REALM=espacios-reservas-realm

# ==============================================================================
# OAUTH2 CLIENTS CONFIGURATION
# ==============================================================================

# Cliente OAuth2 para Espacios Comunitarios
KEYCLOAK_CLIENT_ID=espacios-client
KEYCLOAK_CLIENT_SECRET=espacios-client-secret-12345

# URIs de redirección para OAuth2
KEYCLOAK_REDIRECT_URI=http://localhost:3000/api/auth/callback
KEYCLOAK_LOGOUT_REDIRECT_URI=http://localhost:3000/api/auth/logout

# ==============================================================================
# COMUNICACIÓN INTER-MICROSERVICIOS
# ==============================================================================

# URL del servicio A (Espacios Comunitarios)
# Usado por el servicio B para llamar al servicio A
SERVICE_A_URL=http://espacios-comunitarios-app:3000

# URL del servicio B (Reserva Comunitarios)
# Usado por el servicio A para llamar al servicio B
SERVICE_B_URL=http://reserva-comunitarios-app:3000

# Timeout en milisegundos para las llamadas HTTP entre servicios
SERVICE_A_TIMEOUT=10000
SERVICE_B_TIMEOUT=10000

# ==============================================================================
# DESCRIPCIÓN DE VARIABLES
# ==============================================================================

# NODE_ENV
#   - production: Optimizado para producción
#   - development: Con logs adicionales
#   - test: Para pruebas

# KAFKA_BROKERS
#   - Múltiples brokers: kafka1:29092,kafka2:29092,kafka3:29092
#   - Un solo broker: kafka:29092 (configuración actual)

# POSTGRES_PASSWORD
#   - ⚠ CRÍTICO: Cambiar en producción
#   - Debe contener caracteres especiales para mayor seguridad

# DEBUG_SERVER
#   - true: Activa logs de depuración
#   - false: Solo logs esenciales

# ENV_SWAGGER_SHOW
#   - true: Documos swagger disponible en /api/docs
#   - false: Swagger deshabilitado

# ==============================================================================
# Servicio                    | Puerto Interno | Puerto Externo | URL
# =========================================================================
# Zookeeper                  | 2181           | 2181           | localhost:2181
# Kafka                       | 29092          | 9092           | localhost:9092
# PostgreSQL (dba)           | 5432           | 5432           | localhost:5432
# PostgreSQL (dbb)           | 5432           | 5433           | localhost:5433
# Espacios-A1                | 3000           | 3000           | localhost:3000
# Espacios-A2                | 3000           | 3001           | localhost:3001
# Reservaciones              | 3000           | 3002           | localhost:3002
# Nginx (Load Balancer)      | 80             | 8080           | localhost:8080
# Frontend                   | 80             | 8081           | localhost:8081
